<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js ayu">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Runfile Documentation</title>
        
        <meta name="robots" content="noindex" />
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "ayu";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div id="sidebar-scrollbox" class="sidebar-scrollbox">
                <ol class="chapter"><li class=""><a href="index.html"><strong aria-hidden="true">1.</strong> Home</a></li><li class=""><a href="Introduction.html"><strong aria-hidden="true">2.</strong> Introduction</a></li><li class=""><a href="Runfile-Command-Reference/index.html"><strong aria-hidden="true">3.</strong> Runfile Command Reference</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class=""><a href="Runfile-Command-Reference/Defining-Program-Details.html"><strong aria-hidden="true">3.1.</strong> Defining Program Details</a></li><li class=""><a href="Runfile-Command-Reference/Defining-Program-Actions.html"><strong aria-hidden="true">3.2.</strong> Defining Program Actions</a></li><li class=""><a href="Runfile-Command-Reference/Output-Commands.html"><strong aria-hidden="true">3.3.</strong> Output Commands</a></li><li class=""><a href="Runfile-Command-Reference/Execution-Commands.html"><strong aria-hidden="true">3.4.</strong> Execution Commands</a></li><li class=""><a href="Runfile-Command-Reference/Misc-Commands.html"><strong aria-hidden="true">3.5.</strong> Misc Commands</a></li></ol></li><li class=""><a href="Runfile-Location-and-Filename.html"><strong aria-hidden="true">4.</strong> Runfile Location and Filename</a></li><li class=""><a href="Creating-Reusable-Tasks.html"><strong aria-hidden="true">5.</strong> Creating Reusable Tasks</a></li><li class=""><a href="Multiple-Project-Runfiles.html"><strong aria-hidden="true">6.</strong> Multiple Project Runfiles</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu (default)</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title">Runfile Documentation</h1>

                        <div class="right-buttons">
                            <a href="print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                            
                            <a href="https://github.com/dannyben/runfile" title="Git repository" aria-label="Git repository">
                                <i id="git-repository-button" class="fa fa-github"></i>
                            </a>
                            
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#runfile-documentation" id="runfile-documentation">Runfile Documentation</a></h1>
<p><object data="/assets/cast.svg" style='width:100%'></object></p>
<h2><a class="header" href="#table-of-contents" id="table-of-contents">Table of Contents</a></h2>
<h3><a class="header" href="#a-hrefintroductionhtmlintroductiona" id="a-hrefintroductionhtmlintroductiona"><a href="Introduction.html">Introduction</a></a></h3>
<p>What is Runfile and how to use it.</p>
<h3><a class="header" href="#a-hrefrunfile-command-referencerunfile-command-referencea" id="a-hrefrunfile-command-referencerunfile-command-referencea"><a href="Runfile-Command-Reference">Runfile Command Reference</a></a></h3>
<p>An extensive description explaining how to construct your Runfile.<br />
Jump directly to: </p>
<ul>
<li><a href="Runfile-Command-Reference/Defining-Program-Details.html">Defining Program Details</a></li>
<li><a href="Runfile-Command-Reference/Defining-Program-Actions.html">Defining Program Actions</a></li>
<li><a href="Runfile-Command-Reference/Output-Commands.html">Output Commands</a></li>
<li><a href="Runfile-Command-Reference/Execution-Commands.html">Execution Commands</a></li>
<li><a href="Runfile-Command-Reference/Misc-Commands.html">Misc Commands</a></li>
</ul>
<h3><a class="header" href="#a-hrefrunfile-location-and-filenamehtmlrunfile-location-and-filenamea" id="a-hrefrunfile-location-and-filenamehtmlrunfile-location-and-filenamea"><a href="Runfile-Location-and-Filename.html">Runfile Location and Filename</a></a></h3>
<p>All about the runfile search path, local and global (named) runfiles.</p>
<h3><a class="header" href="#a-hrefcreating-reusable-taskshtmlcreating-reusable-tasksa" id="a-hrefcreating-reusable-taskshtmlcreating-reusable-tasksa"><a href="Creating-Reusable-Tasks.html">Creating Reusable Tasks</a></a></h3>
<p>Create tasks you can reuse in more than one project.</p>
<h3><a class="header" href="#a-hrefmultiple-project-runfileshtmlmultiple-project-runfilesa" id="a-hrefmultiple-project-runfileshtmlmultiple-project-runfilesa"><a href="Multiple-Project-Runfiles.html">Multiple Project Runfiles</a></a></h3>
<p>For large projects with many Runfile tasks, you can easily separate
your Runfile to smaller files by using a <code>.runfile</code> settings file.</p>
<h2><a class="header" href="#related-gems" id="related-gems">Related Gems</a></h2>
<h3><a class="header" href="#a-hrefhttpsgithubcomdannybenrunfile-taskspremade-tasks-runfile-tasksa" id="a-hrefhttpsgithubcomdannybenrunfile-taskspremade-tasks-runfile-tasksa"><a href="https://github.com/DannyBen/runfile-tasks">Premade Tasks: runfile-tasks</a></a></h3>
<p>Easily add common tasks for code testing, gem publishing and more.</p>
<h1><a class="header" href="#introduction-to-runfile" id="introduction-to-runfile">Introduction to Runfile</a></h1>
<p><strong>Runfile</strong> lets you create command line applications in a way similar 
to <a href="https://github.com/ruby/rake">Rake</a>, but with the full power of <a href="http://docopt.org/">Docopt</a> command 
line options.</p>
<p>You create a <code>Runfile</code>, and execute commands with 
<code>run command arguments -and --flags</code>.</p>
<h2><a class="header" href="#if-you-are-not-familiar-with-rake-or-docopt" id="if-you-are-not-familiar-with-rake-or-docopt">If you are not familiar with Rake or Docopt...</a></h2>
<p><strong>You don't have to be.</strong></p>
<p>These are just the tools that inspired Runfile (and docopt is used 
behind the scenes).</p>
<p>Think about Runfile as a way to easily define a command line 
application using Ruby code.</p>
<p>The fastest way to understand how Runfile works, is to create one or
play with <a href="https://github.com/DannyBen/runfile/tree/master/examples">one of the examples</a></p>
<h3><a class="header" href="#to-create-your-first-runfile" id="to-create-your-first-runfile">To create your first Runfile:</a></h3>
<ol>
<li>Install Runfile - execute <code>gem install runfile</code></li>
<li>Make sure it is installed - execute <code>run</code></li>
<li>Create a template Runfile - execute <code>run new</code></li>
<li>Execute your shiny new program - execute <code>run</code></li>
</ol>
<p>If everything went well, you should now see:</p>
<pre><code>Usage:
  run command &lt;arg&gt; [--flag]
  run (-h|--help|--version)
</code></pre>
<p>Take a look at the <a href="https://github.com/DannyBen/runfile/tree/master/examples">examples</a>, or the 
<a href="Runfile-Command-Reference">Runfile Command Reference</a></p>
<h2><a class="header" href="#if-you-are-familiar-with-rake" id="if-you-are-familiar-with-rake">If you are familiar with Rake...</a></h2>
<p>If you know rake, then Runfile is like Rakefile. You use a special, 
lightweight language (DSL) to define tasks in ruby.</p>
<p>One of the key differences between a Runfile and a Rakefile, is that 
in a Runfile you can define a fairly expressive set of commands, with 
required/optional parameters and long/short option flags.</p>
<p>For example, defining a Runfile that responds to </p>
<pre><code>run watch style.css --verbose --all
</code></pre>
<p>is done like this:</p>
<pre><code class="language-ruby">usage  &quot;watch &lt;file&gt; [--verbose --all]&quot;
action :watch do |args|
  say &quot;Watching #{args['&lt;file&gt;']}&quot;
  say &quot;Verbosity: High&quot; if args['--verbose']
  # your code here
end
</code></pre>
<h2><a class="header" href="#if-you-are-familiar-with-docopt" id="if-you-are-familiar-with-docopt">If you are familiar with Docopt...</a></h2>
<p>If you have ever used Docopt, you know it is one of the simplest ways
to create expressive command line applications. Runfile is sort of a 
DSL around docopt.</p>
<p>Each command you use in the Runfile, adds a little something to the 
final &quot;docopt&quot; that will be generated.</p>
<p>For example, if you have this in your Runfile:</p>
<pre><code class="language-ruby">usage  &quot;greet &lt;name&gt; [--long --color]&quot;
help   &quot;Say hello to &lt;name&gt;&quot;
option &quot;--long&quot;, &quot;Show a longer greeting&quot;
option &quot;--color&quot;, &quot;Use colored output&quot;
</code></pre>
<p>The generated docopt will look like this:</p>
<pre><code>$ run -h
Runfile 0.0.0

Usage:
  run greet &lt;name&gt; [--long --color]
  run (-h|--help|--version)

Commands:
  greet &lt;name&gt; [--long --color]
      Say hello to &lt;name&gt;

Options:
  -h --help
      Show this screen

  --version
      Show version

  --long
      Show a longer greeting

  --color
      Use colored output
</code></pre>
<p>Familiar right? Good. Familiar is good.</p>
<p>See the full <a href="Runfile-Command-Reference">Runfile Command Reference</a> 
(it is short and not at all scary) or learn more about <a href="Runfile-Location-and-Filename.html">Runfile 
Locations and Filenames</a>.</p>
<h1><a class="header" href="#runfile-command-reference" id="runfile-command-reference">Runfile Command Reference</a></h1>
<p><strong>Runfile is ruby</strong>. You can write any ruby code in it as usual.</p>
<blockquote>
<p><i class='fa fa-info-circle'></i> <strong>Tip</strong>: To create an initial Runfile, go to a folder that does not 
contain one already, and execute <code>run new</code>.</p>
</blockquote>
<p>Runfile provides several commands to help you define your program 
and a handful of utility functions to make writing beautiful 
command line applications a breeze.</p>
<p>A simple Runfile looks like this ( <a href="https://github.com/DannyBen/runfile/tree/master/examples">more examples</a> ):</p>
<pre><code class="language-ruby">usage  &quot;greet &lt;name&gt;&quot;
help   &quot;Say hello to &lt;name&gt;&quot;
action :greet do |args|
  say &quot;Hello #{args['&lt;name&gt;']}&quot; 
end
</code></pre>
<h2><a class="header" href="#a-hrefrunfile-command-referencedefining-program-detailshtmldefining-program-detailsa" id="a-hrefrunfile-command-referencedefining-program-detailshtmldefining-program-detailsa"><a href="Runfile-Command-Reference/Defining-Program-Details.html">Defining Program Details</a></a></h2>
<p>Commands to specify information about the program, such as its name and 
version.</p>
<h2><a class="header" href="#a-hrefrunfile-command-referencedefining-program-actionshtmldefining-program-actionsa" id="a-hrefrunfile-command-referencedefining-program-actionshtmldefining-program-actionsa"><a href="Runfile-Command-Reference/Defining-Program-Actions.html">Defining Program Actions</a></a></h2>
<p>Commands to define program actions</p>
<h2><a class="header" href="#a-hrefrunfile-command-referenceoutput-commandshtmloutput-commandsa" id="a-hrefrunfile-command-referenceoutput-commandshtmloutput-commandsa"><a href="Runfile-Command-Reference/Output-Commands.html">Output Commands</a></a></h2>
<p>Commands that can be executed in any action to print colorful, indented
messages to the console.</p>
<h2><a class="header" href="#a-hrefrunfile-command-referenceexecution-commandshtmlexecution-commandsa" id="a-hrefrunfile-command-referenceexecution-commandshtmlexecution-commandsa"><a href="Runfile-Command-Reference/Execution-Commands.html">Execution Commands</a></a></h2>
<p>Commands that can be executed in any action to run external programs in
the foreground or background easily.</p>
<h2><a class="header" href="#a-hrefrunfile-command-referencemisc-commandshtmlmisc-commandsa" id="a-hrefrunfile-command-referencemisc-commandshtmlmisc-commandsa"><a href="Runfile-Command-Reference/Misc-Commands.html">Misc Commands</a></a></h2>
<p>Additional commands you can use in your action blocks.</p>
<h1><a class="header" href="#defining-program-details" id="defining-program-details">Defining Program Details</a></h1>
<h2><a class="header" href="#cheatsheet" id="cheatsheet">Cheatsheet</a></h2>
<pre><code class="language-ruby">title   'My Utilities'
summary 'Utilities for my Rails'
version '0.1.0'
</code></pre>
<h2><a class="header" href="#reference" id="reference">Reference</a></h2>
<h3><a class="header" href="#title-string" id="title-string">title <em>string</em></a></h3>
<p>Define the title of the application.<br />
This command is optional.</p>
<p><strong>Example:</strong> <code>title &quot;RoadRunner&quot;</code></p>
<h3><a class="header" href="#summary-string" id="summary-string">summary <em>string</em></a></h3>
<p>Define the one line application help message.<br />
This command is optional.</p>
<p><strong>Example:</strong> <code>summary &quot;My new application&quot;</code></p>
<h3><a class="header" href="#version-string" id="version-string">version <em>string</em></a></h3>
<p>Specify a verion string for your program.<br />
This command is optional.</p>
<p><strong>Example:</strong> <code>version &quot;0.1.0&quot;</code></p>
<h1><a class="header" href="#defining-program-actions" id="defining-program-actions">Defining Program Actions</a></h1>
<h2><a class="header" href="#cheatsheet-1" id="cheatsheet-1">Cheatsheet</a></h2>
<pre><code class="language-ruby"># --- Action Definition

usage   &quot;server PORT [--background]&quot;
help    &quot;Start the server, optionally in the background&quot;
option  &quot;-b --background&quot;, &quot;Start in the background&quot;
param   &quot;PORT&quot;, &quot;Server port to listen on&quot;
example &quot;server 3000 -b&quot;
action  :server do |args|
  # ... action code here
end

# --- Command Prefix

command 'prefix'

# all actions here will be prefixed by 'prefix'

action :anything do
  # ...
end

encdommand
</code></pre>
<h2><a class="header" href="#reference-1" id="reference-1">Reference</a></h2>
<h3><a class="header" href="#usage-string" id="usage-string">usage <em>string</em></a></h3>
<p>Specify the usage pattern of the following <code>action</code>.
This string is expected to be in any format recognized by docopt.</p>
<p>In some cases ( <a href="https://github.com/DannyBen/runfile/blob/master/examples/l_compact_usage/Runfile">compact usage example</a> ) 
you may want to force-disable the usage text for the following action. 
Simply use <code>usage false</code>. </p>
<p>This command is optional if the action does not have any arguments.</p>
<p><strong>Examples:</strong></p>
<pre><code>usage &quot;command&quot;              # The next action (:command) has no 
                             # arguments (optional in this case)

usage &quot;greet &lt;name&gt;&quot;         # The next action (:greet) has one
                             # require argument, called 'name'

usage &quot;run [--fast --slow]&quot;  # The next action (:run) has two 
                             # optional flags.

usage false                  # Disable usage pattern for the next 
                             # action.
</code></pre>
<h3><a class="header" href="#help-string" id="help-string">help <em>string</em></a></h3>
<p>Specify the help message for the following action.
This is the message that will be displayed when you execute 
<code>run --help</code></p>
<p>This command is optional.</p>
<p><strong>Example:</strong> <code>help &quot;Greet the user with a colorful 'Hello!'&quot;</code></p>
<h3><a class="header" href="#option-string-description--label" id="option-string-description--label">option <em>string</em>, <em>description</em> [, <em>label</em>]</a></h3>
<p>Specify the help information for any of the option flags.
This is the place where you can specify that a certain flag also has 
a short version.</p>
<p>Normally, the help message for all options appear under the <code>Options:</code>
caption. If you provide the third <code>&lt;label&gt;</code> argument, it will appear 
under a different caption.</p>
<blockquote>
<p><i class='fa fa-arrow-right'></i> <strong>See Also</strong>: <a href="https://github.com/DannyBen/runfile/blob/master/examples/o_options_label/Runfile">Options Label Example</a></p>
</blockquote>
<p>This command is optional unless the <code>usage</code> pattern may be ambiguous. </p>
<p><strong>Examples:</strong></p>
<pre><code>option &quot;-c --color&quot;, &quot;Show message with a color&quot;
option &quot;--force&quot;, &quot;Force delete&quot;, &quot;Delete Options&quot;
</code></pre>
<h3><a class="header" href="#param-string-description--label" id="param-string-description--label">param <em>string</em>, <em>description</em> [, <em>label</em>]</a></h3>
<p>Specify the help information for any of the positional parameters.
This is purely decorative and has no impact on the operation of the Runfile.</p>
<p>Normally, the help message for all parameters appear under the <code>Parameters:</code>
caption. If you provide the third <code>&lt;label&gt;</code> argument, it will appear 
under a different caption.</p>
<blockquote>
<p><i class='fa fa-arrow-right'></i> <strong>See Also</strong>: <a href="https://github.com/DannyBen/runfile/blob/master/examples/u_params/Runfile">Parameters Example</a></p>
</blockquote>
<p>This command is optional.</p>
<p><strong>Examples:</strong></p>
<pre><code>param &quot;PORT&quot;, &quot;Server port to listen to&quot;
param &quot;SOURCE&quot;, &quot;File to copy&quot;, &quot;Copy Options&quot;
</code></pre>
<h3><a class="header" href="#example-string" id="example-string">example <em>string</em></a></h3>
<p>Add an example command to the general help information. 
When adding an example, the command <code>run --help</code> will show an 
<code>Examples:</code> section at the end of the help text, with all added examples.</p>
<p>You do not need to include the <code>run</code> or <code>run runfile_name</code> at the beginning
of your example text, it is done automatically.</p>
<blockquote>
<p><i class='fa fa-arrow-right'></i> <strong>See Also</strong>: <a href="https://github.com/DannyBen/runfile/blob/master/examples/q_example/Runfile">Example Command Example</a></p>
</blockquote>
<p>This command is optional.</p>
<p><strong>Examples:</strong></p>
<pre><code>example &quot;copy source.txt dest.txt --force&quot;
example &quot;copy source.txt --here&quot;
</code></pre>
<h3><a class="header" href="#action-name--alias--block-" id="action-name--alias--block-">action <em>name</em> [, <em>alias</em>] { <em>block</em> }</a></h3>
<p>Define the actual action block that will be called.<br />
This command is required</p>
<p><strong>Examples:</strong></p>
<pre><code class="language-ruby"># If you do not need to process any arguments:
action :command do 
  # your code here
end

# if you want to handle arguments defined in `usage`:
action :command do |args|
  # your code here
  # access any argument with arg['--flagname'] or arg['&lt;arg&gt;']
end

# If you wish to use commands with hyphen, simply use single quotes:
action :'drink-beer' do 
  # your code here
end

# To define an alias (shortcut) to a command, use:
action :command, :c do 
  # your code here
end
</code></pre>
<blockquote>
<p><i class='fa fa-arrow-right'></i> <strong>See Also</strong>: <a href="https://github.com/DannyBen/runfile/blob/master/examples/p_alias/Runfile">Alias Example</a></p>
</blockquote>
<h3><a class="header" href="#command-string" id="command-string">command <em>string</em></a></h3>
<p>The <code>command</code> command lets you define a namespace. Once you use this
command, any subsequent action will be associated with this namespace.</p>
<p>This is a way to create sub commands.</p>
<p>Call without parameter to revert back to the global namespace.</p>
<p>This command is optional.</p>
<p><strong>Example:</strong> <code>command &quot;html&quot;</code></p>
<blockquote>
<p><i class='fa fa-arrow-right'></i> <strong>See Also</strong>: <a href="https://github.com/DannyBen/runfile/blob/master/examples/f_namespace/Runfile">Namespace Example</a></p>
</blockquote>
<h3><a class="header" href="#endcommand" id="endcommand">endcommand</a></h3>
<p>Alias of <code>command</code>. Intended as a syntactic sugar so that you can end
a <code>command 'namespace'</code> with <code>endcommand</code> instead of an empty 
<code>command</code>.</p>
<p>This command is optional.</p>
<h1><a class="header" href="#output-commands" id="output-commands">Output Commands</a></h1>
<h2><a class="header" href="#cheatsheet-2" id="cheatsheet-2">Cheatsheet</a></h2>
<pre><code class="language-ruby">say 'anything'
say '!txtred!anything in red'
say 'only one !txtred!word!txtrst! in red'
resay 'go back to the beginning of the line'
say_status :download, 'Download in progress'
say_status :download, 'Download in progress', :txtblu
word_wrap '  Indent a potentially wrapping line by two spaces'
say word_wrap '  Indent a potentially wrapping line by two spaces and say it'
</code></pre>
<h2><a class="header" href="#reference-2" id="reference-2">Reference</a></h2>
<p>All these commands can be used inside your <code>:action</code> blocks.</p>
<p>These commands are provided by the 
<a href="https://github.com/DannyBen/colsole">Colsole gem</a> which is already 
bundled with Runfile.</p>
<h3><a class="header" href="#say-string" id="say-string">say <em>string</em></a></h3>
<p>Print a message to screen, with support for color markers and 
partial strings.</p>
<p>End the string with a space to force the cursor to stay at the same
line (otherwise, a newline is added).</p>
<p><strong>Examples:</strong></p>
<pre><code class="language-ruby">say &quot;Hello world&quot;
say &quot;!txtgrn!I am green&quot;
say &quot;Legen... wait for it... &quot;
say &quot;dary&quot;
</code></pre>
<h3><a class="header" href="#resay-string" id="resay-string">resay <em>string</em></a></h3>
<p>Erase the current output line and print a new message. Should be 
called only after a space terminated call to <code>say</code> to ensure the 
cursor is at the same line.</p>
<p><strong>Examples:</strong></p>
<pre><code class="language-ruby">say &quot;Downloading... &quot;
resay &quot;Downloaded&quot;
</code></pre>
<h3><a class="header" href="#say_status-status-message--color" id="say_status-status-message--color">say_status <em>status</em>, <em>message</em> [, <em>color</em>]</a></h3>
<p>Print a message to screen, with a colored status tag.</p>
<p><strong>Examples:</strong></p>
<pre><code class="language-ruby">say_status :success, &quot;Task completed&quot;
say_status :error, &quot;Task failed&quot;, :txtred
</code></pre>
<h3><a class="header" href="#word_wrap-string--length" id="word_wrap-string--length">word_wrap <em>string</em> [, <em>length</em>]</a></h3>
<p>If you wish to print a string and make it wrap automatically based
on the width of the terminal, use <code>word_wrap</code>.</p>
<p>The function is also sensitive to any leading spaces. These will be
preserved in any wrapped line, so it is easy to print indented long 
strings.</p>
<p><strong>Examples:</strong></p>
<pre><code class="language-ruby">say word_wrap(&quot;one two three four&quot;, 10)
say word_wrap(&quot;   one two three four&quot;, 10)
say word_wrap &quot;Some long line ... that ends here&quot;
</code></pre>
<h1><a class="header" href="#execution-commands" id="execution-commands">Execution Commands</a></h1>
<h2><a class="header" href="#cheatsheet-3" id="cheatsheet-3">Cheatsheet</a></h2>
<pre><code class="language-ruby">
# --- Running commands and services

run 'pwd'
run! 'pwd' # and exit
run_bg 'rails server'
run_bg 'rails server', log: 'my.log', pid: 'myserver'
stop_bg 'myserver'

# --- Before / After run hooks

before_run do |command|
  command.gsub /^(rails|rake|cucumber)/, &quot;bin/\\1&quot;
end

after_run do |command|
  puts &quot;Finished #{command}&quot;
end

# --- Configuration

Runfile.setup do |config|
  config.pid_dir = 'tmp/pid'
  config.quiet   = true
end

# or...

Runfile.pid_dir = 'tmp'

</code></pre>
<h2><a class="header" href="#reference-3" id="reference-3">Reference</a></h2>
<h3><a class="header" href="#run-string" id="run-string">run <em>string</em></a></h3>
<p>Print and run a command. Wait until it is done and continue.
This is executed using <code>system</code>. If <code>Runfile.quiet</code> is true, it will
not echo the command to the console.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-ruby">run &quot;rails server -b* -p3000&quot;
</code></pre>
<h3><a class="header" href="#run-string-1" id="run-string-1">run! <em>string</em></a></h3>
<p>Print and run a command, then exit. This is executed using <code>exec</code>.
If <code>Runfile.quiet</code> is true, it will not echo the command to the console.</p>
<p><strong>Examples:</strong></p>
<pre><code class="language-ruby">run! &quot;rails server -b* -p3000&quot;
puts &quot;this message will never be shown&quot;
</code></pre>
<h3><a class="header" href="#run_bg-string--options" id="run_bg-string--options">run_bg <em>string</em> [, <em>options</em>]</a></h3>
<p>Run a command in the background, which you can later stop with <code>stop_bg</code>. </p>
<p>Available options are:</p>
<ul>
<li><code>pid</code> - provide a string that will be used to name the PID file. 
This is the string you will later use in <code>stop_bg</code>. All PID files will
be stored in the working directory, or in <code>Runfile.pid_dir</code>.</li>
<li><code>log</code> - provide a filename that will be used to log the output.</li>
</ul>
<p><strong>Examples:</strong></p>
<pre><code class="language-ruby">run_bg 'some/long-running/process'
run_bg 'some/long-running/process', log: 'my.log', pid: 'daemon'
</code></pre>
<h3><a class="header" href="#stop_bg-string" id="stop_bg-string">stop_bg <em>string</em></a></h3>
<p>Stop a command started with 'run_bg'. Provide the name of he pid file you 
used in 'run_bg'</p>
<p><strong>Example:</strong></p>
<pre><code class="language-ruby">stop_bg 'server'
</code></pre>
<h3><a class="header" href="#before_run--block-" id="before_run--block-">before_run { <em>block</em> }</a></h3>
<p>Intercept each call before executed. Can be used to modify the command, 
run something before it, or cancel it altogether.</p>
<p>Your block receives the command as argument, and should return a command 
to run or false to stop execution.</p>
<p><strong>Examples:</strong></p>
<pre><code class="language-ruby"># Prefix the command with &quot;bin/&quot; if it is rails, rake or cucumber
before_run do |command|
  cmd.gsub /^(rails|rake|cucumber)/, &quot;bin/\\1&quot;
end

# Abort the command execution based on the value of an environment 
# variable
before_run do |command|
  ENV['PREVENT_EXECUTION'] ? false : command
end
</code></pre>
<h3><a class="header" href="#after_run--block-" id="after_run--block-">after_run { <em>block</em> }</a></h3>
<p>Intercept each call before it exits. Note this is only useful with <code>run</code> 
and <code>run_bg</code> but not with <code>run!</code> which exits immediately after execution.</p>
<p><strong>Examples:</strong></p>
<pre><code class="language-ruby">after_run do |command|
  puts &quot;Finished #{command}&quot;
end
</code></pre>
<h2><a class="header" href="#configuration" id="configuration">Configuration</a></h2>
<p>You can configure several aspects of how these commands behave.</p>
<p>Configuration can be done in one of two ways. Either use the direct 
syntax: <code>Runfile.option = value</code>, or provide a block:</p>
<pre><code class="language-ruby">Runfile.setup do |config|
  config.option = value
end
</code></pre>
<p>Add the configuration anywhere in your Runfile (either inside an
action or outside, at the beginning of the file).</p>
<h3><a class="header" href="#pid_dir---configure-folder-for-pid-files" id="pid_dir---configure-folder-for-pid-files"><em>pid_dir</em> - configure folder for PID files</a></h3>
<p>PID files are stored in the working directory by default.</p>
<pre><code class="language-ruby">Runfile.pid_dir = './tmp/pids'
</code></pre>
<h3><a class="header" href="#quiet---run-without-echoing-the-command" id="quiet---run-without-echoing-the-command"><em>quiet</em> - run without echoing the command</a></h3>
<p>By default, calls to <code>run</code> will show the command before running it.
Set <code>quiet</code> to true to change that.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-ruby">Runfile.quiet = true
</code></pre>
<h2><a class="header" href="#example" id="example">Example</a></h2>
<p>See this <a href="https://github.com/DannyBen/runfile/blob/master/examples/r_exec/Runfile">example file</a> sample usage or this <a href="https://github.com/DannyBen/runfile/blob/master/features/n_exec.feature">feature file</a> to get an 
idea of what is possible with this extension.</p>
<h1><a class="header" href="#misc-commands" id="misc-commands">Misc Commands</a></h1>
<h2><a class="header" href="#cheatsheet-4" id="cheatsheet-4">Cheatsheet</a></h2>
<pre><code class="language-ruby">execute 'other_action'
</code></pre>
<h2><a class="header" href="#reference-4" id="reference-4">Reference</a></h2>
<h3><a class="header" href="#execute-string" id="execute-string">execute <em>string</em></a></h3>
<p>Call another action. This command accepts a single string argument
which should include the command as if you type it in the command 
prompt (only without the <code>run</code> prefix).</p>
<p><strong>Example:</strong> <code>execute &quot;theme watch --all&quot;</code></p>
<blockquote>
<p><i class='fa fa-arrow-right'></i> <strong>See Also</strong>: <a href="https://github.com/DannyBen/runfile/blob/master/examples/i_crosscall/Runfile">Cross Call Example</a></p>
</blockquote>
<h1><a class="header" href="#runfile-location-and-filename" id="runfile-location-and-filename">Runfile Location and Filename</a></h1>
<p>Runfile is designed to help you create both project specific command
line tools, and system wide command line applications.</p>
<p><strong>Project Runfiles</strong> are simply named <strong>Runfile</strong> and can only be 
accessed in the same directory they live in.</p>
<p><strong>Named Runfiles (*.runfile)</strong> can exist in several places:</p>
<ul>
<li><code>*.runfile</code> in the current folder</li>
<li><code>*.runfile</code> in <code>~/runfile</code> and its sub directories</li>
<li><code>*.runfile</code> in <code>/etc/runfile</code> and its sub directories</li>
<li><code>*.runfile</code> in any custom folder</li>
</ul>
<p>When you execute <code>run</code>, this is what happens:</p>
<ul>
<li>If there is a file called <strong>Runfile</strong> in the current directory, 
we will use it.</li>
<li>If there is a file called <strong>.runfile</strong> in the current folder, we will
use it as a configuration file to tell us where the runfiles are. 
(See <a href="Runfile-Location-and-Filename.html#custom-location-for-named-runfiles">Custom Location</a> below).</li>
<li>If not, search for <strong>*.runfiles</strong> in the runfile search directories and 
subdirectories.</li>
<li>If one or more were found, show a list of all of them.</li>
</ul>
<h2><a class="header" href="#using-a-project-runfile" id="using-a-project-runfile">Using a project Runfile</a></h2>
<pre><code>$ cd /your/project

$ run new
Runfile created.

$ run
Usage:
  run command &lt;arg&gt; [--flag]
  run (-h|--help|--version)

$ run command hello
Command running...

$ cat Runfile
summary &quot;Application description&quot;
version &quot;0.1.0&quot;

usage  &quot;command &lt;arg&gt; [--flag]&quot;
help   &quot;Help line for command&quot;
option &quot;-f --flag&quot;, &quot;Help text for option&quot;
action :command do |args|
  say &quot;Command running...&quot;
end
</code></pre>
<h2><a class="header" href="#using-named-runfiles" id="using-named-runfiles">Using Named Runfiles</a></h2>
<pre><code>$ cd /your/project

$ run new greet
greet.runfile created.

$ run
Runfile engine v0.7.0

Tip: Type 'run new' or 'run new name' to create a runfile.
For global access, place named.runfiles in ~/runfile/ or in /etc/runfile/ or 
anywhere in the PATH.

  run greet ........................ /path/to/file

$ run greet
Usage:
  run greet command &lt;arg&gt; [--flag]
  run greet (-h|--help|--version)

$ cd ~/runfile    # or /etc/runfile

$ run new hotdog
hotdog.runfile created.

$ run
Runfile engine v0.4.0

Tip: Type 'run new' or 'run new name' to create a runfile.
For global access, place named.runfiles in ~/runfile/ or in /etc/runfile/ or 
anywhere in the PATH.

  run greet ........................ /path/to/file
  run hotdog ....................... /path/to/file
</code></pre>
<h2><a class="header" href="#custom-location-for-named-runfiles" id="custom-location-for-named-runfiles">Custom Location for Named Runfiles</a></h2>
<p>For more advanced uses, you can define multiple Runfiles per project.</p>
<p>This can be handy if you have a large set of commands and wish to 
separate them to multiple files.</p>
<p>Simply create a <code>.runfile</code> settings file in your project, and use it
to specify the location of the folder containing your runfiles.</p>
<pre><code class="language-yaml"># in .runfile
---
folder: lib/commands
</code></pre>
<p>This settings file supports several more options, like auto-loading a
helper file, and creating command shortcuts.</p>
<p>Read more in the <a href="https://github.com/DannyBen/runfile/wiki/Multiple-Project-Runfiles">Multiple Project Runfiles</a> page, or see the 
<a href="https://github.com/DannyBen/runfile/tree/master/examples/s_settings">Settings Example</a></p>
<h2><a class="header" href="#ignoring-the-local-runfile" id="ignoring-the-local-runfile">Ignoring the local Runfile</a></h2>
<p>In case you are using both local Runfiles and global named runfiles, you may find
yourself in a situation where you are trying to run a named runfile from a 
folder that contains a local Runfile.</p>
<p>The local Runfile will take precedence and not allow access to your global 
runfiles. </p>
<p>To overcome this issue, <strong>use <code>run!</code> instead of <code>run</code></strong>.</p>
<p>The <code>run!</code> command will ignore the local Runfile and only look for 
named runfiles.</p>
<h1><a class="header" href="#creating-reusable-tasks" id="creating-reusable-tasks">Creating Reusable Tasks</a></h1>
<p>You can easily build a set of tasks that can be reused in any Runfile.</p>
<p>Since this is pure ruby, there are many ways to do so. The below is 
an example.</p>
<h2><a class="header" href="#step-1-create-your-common-tasks-file" id="step-1-create-your-common-tasks-file">Step 1: Create your common tasks file</a></h2>
<p>Let's save this file as 'tasks.rb'</p>
<pre><code class="language-ruby"># The reusable tasks module

module MyCommonTasks
  def self.tasks
    # We can use the standard Runfile syntax here

    command &quot;make&quot;

    usage  &quot;cake [--chocolate|--cheese]&quot;
    help   &quot;Make some cake&quot;
    action :cake do |args|
      say &quot;Making a cake...&quot;
      say &quot;... a chocolate cake&quot; if args['--chocolate']
      say &quot;... a cheese cake&quot; if args['--cheese']
    end

    usage  &quot;faces&quot;
    help   &quot;Make faces&quot;
    action :faces do |args|
      say &quot;Making faces&quot;
    end

    endcommand
  end
end
</code></pre>
<h2><a class="header" href="#step-2-embed-the-tasks-in-your-runfile" id="step-2-embed-the-tasks-in-your-runfile">Step 2: Embed the tasks in your Runfile</a></h2>
<p>Create a <code>Runfile</code> file (you can simply run <code>run make</code>) and paste this
content in it.</p>
<pre><code class="language-ruby"># include our common tasks file
require_relative &quot;tasks&quot;

title   &quot;My Runfile&quot;
summary &quot;A sample Runfile&quot;
version &quot;0.1.0&quot;

# include the external tasks
MyCommonTasks.tasks

# continue with regular tasks
usage  &quot;hello [&lt;name&gt; --color]&quot;
help   &quot;Say hello&quot;
option &quot;-c --color&quot;, &quot;Greet with color&quot;
action :hello do |args|
  if args['--color']
    say &quot;!txtgrn!Hello #{args['&lt;name&gt;']}&quot;
  else
    say &quot;Hello #{args['&lt;name&gt;']}&quot;
  end
end
</code></pre>
<h2><a class="header" href="#step-3-test-the-runfile" id="step-3-test-the-runfile">Step 3: Test the Runfile</a></h2>
<p>Running <code>run</code> will now show both the embedded and local tasks:</p>
<pre><code>$ run
Usage:
  run make cake [--chocolate|--cheese]
  run make faces
  run hello [&lt;name&gt; --color]
  run (-h|--help|--version)
</code></pre>
<h2><a class="header" href="#packing-reusable-tasks-as-a-gem" id="packing-reusable-tasks-as-a-gem">Packing reusable tasks as a gem</a></h2>
<p>You can pack your reusable tasks as a gem for all to enjoy.</p>
<p>An example of such a gem, is the 
<a href="https://github.com/DannyBen/runfile-tasks">runfile-tasks gem</a>
which provides a collection of tasks like:</p>
<ul>
<li>Tasks for running tests (minitest, rspec, cucumber)</li>
<li>Tasks for packing and publishing gems</li>
</ul>
<p>And more.</p>
<h1><a class="header" href="#multiple-project-runfiles" id="multiple-project-runfiles">Multiple Project Runfiles</a></h1>
<p>Runfile provides another mechanism for more advanced uses.</p>
<p>This mechanism lets you have multiple named runfiles per project. This is
useful when your Runfile becomes too large, or when you wish to separate
it to logical units.</p>
<p>To use this mechanism, you need to:</p>
<ul>
<li>Delete the <code>Runfile</code> file from your project's folder.</li>
<li>Create a <code>.runfile</code> settings file (YAML) in your project's folder.</li>
</ul>
<h2><a class="header" href="#the-runfile-configuration-file" id="the-runfile-configuration-file">The .runfile Configuration File</a></h2>
<pre><code class="language-yaml"># .runfile
# Runfile settings YAML 

# Define the folder where *.runfile files reside.
folder: lib/commands

# Optional: File to load before any runfile.
# Consider this your &quot;helper&quot; file.
helper: helper.rb

# Optional: Message to show before the list of files.
# This string supports color markers.
intro: &quot;!txtgrn!My Command Line&quot;

# Optional: An array of shortcut commands
# Each of the keys here will be expanded to their values before Runfile
# tries to move on to the execution stage. In other words, if you have
# a shortcut saying &quot;s: server --daemon&quot;, and you run &quot;run s&quot; it is
# exactly like you run &quot;run server --daemon&quot;.
shortcuts:
  s: server start
  sd: server start --daemon
  stat: server status
</code></pre>
<p>To see how it works, check out the <a href="https://github.com/DannyBen/runfile/tree/master/examples/s_settings">Settings Example</a>.</p>
<p>Now, whenever you execute <code>run</code>, we will look for <code>lib/commands/*.runfile</code>
files and you can execute any of them like any other named runfile.</p>
<p>Running <code>run</code> without any argument will show both the runfiles in the folder
and the available shortcuts.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        
        
        
        <script type="text/javascript">
            window.playpen_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
